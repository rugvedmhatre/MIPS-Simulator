# Single Cycle MIPS Simulator
An instruction-level simulator for a single cycle MIPS processor in C++. The simulator supports a subset of the MIPS instruction set and can model the execution of each instruction.

An example MIPS program is provided for the simulator as a text file “imem.txt” file, which is used to initialize the Instruction Memory. Each line of the file corresponds to a Byte stored in the Instruction Memory in binary format, with the first line at address 0, the next line at address 1, and so on. Four contiguous lines correspond to one whole instruction. Note that the words stored in memory are in “Big-Endian” format, meaning that the most significant byte is stored first.

We have also defined a “halt” instruction as 32’b1 (0xFFFFFFFF), which is the last instruction in every “imem.txt” file. As the name suggests, when this instruction is fetched, the simulation is terminated. We will provide a sample “imem.txt” file containing a MIPS program.

The Data Memory is initialized using the “dmem.txt” file. The format of the stored words is the same as the Instruction Memory. As with the instruction memory, the data memory addresses also begin at 0 and increment by one in each line.

The instructions that the simulator supports and their encodings are shown in Table 1. Note that all instructions, except for “halt”, exist in the MIPS ISA. The [MIPS Green Sheet](https://inst.eecs.berkeley.edu/~cs61c/resources/MIPS_Green_Sheet.pdf) defines the semantics of each instruction.

![Table 1 - Instruction encodings for a reduced MIPS ISA](https://github.com/rugvedmhatre/MIPS-Simulator/blob/main/Table-1.png)

I have defined four C++ classes that each implement one of the four major blocks in a single cycle MIPS machine, namely RF (to implement the register file), ALU (to implement the ALU), INSMem (to implement instruction memory), and DataMem (to implement data memory).

1. RF class: contains 32 32-bit registers defined as a private member. The ReadWrite() member function that provides read and write access to the register file.

2. ALU class: implements the ALU. The ALUOperation() member function performs the appropriate operation on two 32 bit operands based on ALUOP. 

3. INSMem class: a Byte addressable memory that contains instructions. The constructor InsMem() initializes the contents of instruction memory from the file "imem.txt". The member function ReadMemory() that provides read access to instruction memory. An access to the instruction memory class returns 4 bytes of data; i.e., the byte pointed to by the address and the three subsequent bytes.

4. DataMem class: is similar to the instruction memory, except that it provides both read and write access.

The main function defines a 32 bit program counter (PC) that is initialized to zero. The MIPS simulation routine is carried out within a while loop. In each iteration of the while loop, we will fetch one instruction from the instruction memory, and based on the instruction, make calls to the register file, ALU and data memory classes. Finally, we will update the PC so as to fetch the next instruction. When the halt instruction is fetched, we break out of the while loop and terminate the simulation.

The architectural state is updated after the execution of each instruction. The architectural state consists of the Program Counter (PC), the Register File (RF), and the Data Memory (DataMem).

Specifically, the OutputRF() function is called at the end of each iteration of the while loop, and will add the new state of the Register File to “RFresult.txt”. Therefore, at the end of the program execution “RFresult.txt” contains all the intermediate states of the Register File. Once the program terminates, the OutputDataMem() function will write the final state of the Data Memory to “dmemresult.txt”.

## Sample Input Program
```
lw R0, R1, 0x00
lw R0, R2, 0x04
add R1, R2, R3
sw R0, R3, 0x04
halt
```

## Terminal Output
```
Program Counter  : 00000000000000000000000000000000 (0)
Instruction      : 10001100000000010000000000000000
Instruction Type : L

- Initialisation -
Read Register 1  : 00000
Write Register   : 00001
Immediate Value  : 0000000000000000
Write Data       : 00000000000000000000000000000000
WrtEnable        : 0

   - Execution -
ALUOP            : 001
Sign Extended Imm: 00000000000000000000000000000000
Register 1 Data  : 00000000000000000000000000000000
Register 2 Data  : 00000000000000000000000000000000
ALU Result       : 00000000000000000000000000000000

  - R/W Memory -
Data from Memory : 11111111111111111111111111111111

 - R/W Register -
Write Data       : 11111111111111111111111111111111
WrtEnable        : 1
--------------------------------------------------------

Program Counter  : 00000000000000000000000000000100 (4)
Instruction      : 10001100000000100000000000000100
Instruction Type : L

- Initialisation -
Read Register 1  : 00000
Write Register   : 00010
Immediate Value  : 0000000000000100
Write Data       : 00000000000000000000000000000000
WrtEnable        : 0

   - Execution -
ALUOP            : 001
Sign Extended Imm: 00000000000000000000000000000100
Register 1 Data  : 00000000000000000000000000000000
Register 2 Data  : 00000000000000000000000000000000
ALU Result       : 00000000000000000000000000000100

  - R/W Memory -
Data from Memory : 01111111111111111111111111111110

 - R/W Register -
Write Data       : 01111111111111111111111111111110
WrtEnable        : 1
--------------------------------------------------------

Program Counter  : 00000000000000000000000000001000 (8)
Instruction      : 00000000001000100001100000100001
Instruction Type : R

- Initialisation -
Read Register 1  : 00001
Read Register 2  : 00010
Write Register   : 00011
Shift Amount     : 00000
Function Code    : 100001
ALUOP            : 001
WrtData          : 00000000000000000000000000000000
WrtEnable        : 0

   - Execution -
Register 1 Data  : 11111111111111111111111111111111
Register 2 Data  : 01111111111111111111111111111110
ALU Result       : 01111111111111111111111111111101

 - R/W Register -
Write Data       : 01111111111111111111111111111101
WrtEnable        : 1
--------------------------------------------------------

Program Counter  : 00000000000000000000000000001100 (12)
Instruction      : 10101100000000110000000000000100
Instruction Type : S

- Initialisation -
Read Register 1  : 00000
Write Register   : 00011
Immediate Value  : 0000000000000100
Write Data       : 00000000000000000000000000000000
WrtEnable        : 0

   - Execution -
ALUOP            : 001
Sign Extended Imm: 00000000000000000000000000000100
Register 1 Data  : 00000000000000000000000000000000
Register 2 Data  : 01111111111111111111111111111101
ALU Result       : 00000000000000000000000000000100

  - R/W Memory -
Data in Register : 01111111111111111111111111111101
Data Writen      : 01111111111111111111111111111101
--------------------------------------------------------

Program Counter  : 00000000000000000000000000010000 (16)
Instruction      : 11111111111111111111111111111111
Program Terminated!
```

## Output Files
### dmemresult.txt
```
11111111
11111111
11111111
11111111
01111111
11111111
11111111
11111101
```
###  RFresult.txt
```
A state of RF:
00000000000000000000000000000000
11111111111111111111111111111111
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
A state of RF:
00000000000000000000000000000000
11111111111111111111111111111111
01111111111111111111111111111110
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
A state of RF:
00000000000000000000000000000000
11111111111111111111111111111111
01111111111111111111111111111110
01111111111111111111111111111101
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
A state of RF:
00000000000000000000000000000000
11111111111111111111111111111111
01111111111111111111111111111110
01111111111111111111111111111101
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
```
